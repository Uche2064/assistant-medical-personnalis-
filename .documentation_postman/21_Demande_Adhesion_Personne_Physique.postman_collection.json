{
	"info": {
		"_postman_id": "demande-adhesion-physique-2025",
		"name": "21. Demande Adh√©sion - Personne Physique",
		"description": "Collection compl√®te des endpoints API pour la gestion des demandes d'adh√©sion des personnes physiques.\n\n## üìã Vue d'ensemble\n\nCette collection permet de :\n- Soumettre une demande d'adh√©sion avec questionnaire dynamique\n- Ajouter des b√©n√©ficiaires\n- Consulter le statut d'une demande\n- G√©rer les propositions de contrat\n\n## üîê Authentification\n\nTous les endpoints n√©cessitent :\n- **Api-Key** : Cl√© API dans les headers\n- **Authorization** : Token JWT Bearer\n\n## üë• R√¥les\n\n- **Client** : Peut soumettre et consulter ses demandes\n- **Technicien** : Traite les demandes de type 'client'\n- **M√©decin Contr√¥leur** : Traite les demandes de type 'prestataire'\n- **Admin Global** : Acc√®s complet\n\n## üìù Workflow\n\n1. Client v√©rifie s'il a une demande existante\n2. Si non, il soumet sa demande avec questionnaire et b√©n√©ficiaires\n3. Personnel examine la demande\n4. Technicien propose un contrat ou rejette\n5. Client accepte ou refuse la proposition\n\n---\n\n**Version** : 1.0\n**Date** : Octobre 2025\n**Base URL** : {{base_url}}/api/v1",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Client - V√©rifier demande existante",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has success property\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData).to.have.property('success');",
							"    pm.expect(jsonData.success).to.be.true;",
							"});",
							"",
							"pm.test(\"Response has data with existing property\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data).to.have.property('existing');",
							"    pm.expect(jsonData.data).to.have.property('can_submit');",
							"    pm.expect(jsonData.data).to.have.property('status');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{client_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions/has-demande",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions",
						"has-demande"
					]
				},
				"description": "## üéØ Objectif\n\nPermet √† un client de v√©rifier s'il a d√©j√† soumis une demande d'adh√©sion.\n\n## üîê Authentification\n\n**R√¥le requis** : `client`\n\n## üìä R√©ponses possibles\n\n### Cas 1 : Aucune demande\n```json\n{\n  \"existing\": false,\n  \"can_submit\": true,\n  \"status\": \"none\"\n}\n```\n\n### Cas 2 : Demande existante\n```json\n{\n  \"existing\": true,\n  \"can_submit\": false,\n  \"status\": \"en_attente\",\n  \"demande\": {...}\n}\n```\n\n### Cas 3 : Demande rejet√©e\n```json\n{\n  \"existing\": true,\n  \"can_submit\": true,\n  \"status\": \"rejetee\",\n  \"motif_rejet\": \"...\"\n}\n```"
			},
			"response": [
				{
					"name": "Aucune demande existante",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/has-demande",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"has-demande"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Aucune demande d'adh√©sion trouv√©e\",\n    \"data\": {\n        \"existing\": false,\n        \"demande\": null,\n        \"can_submit\": true,\n        \"status\": \"none\"\n    }\n}"
				},
				{
					"name": "Demande en attente",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/has-demande",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"has-demande"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Demande d'adh√©sion r√©cup√©r√©e avec succ√®s\",\n    \"data\": {\n        \"existing\": true,\n        \"demande\": {\n            \"id\": 1,\n            \"type_demandeur\": \"client\",\n            \"statut\": \"en_attente\",\n            \"created_at\": \"2025-10-12T10:00:00.000000Z\",\n            \"updated_at\": \"2025-10-12T10:00:00.000000Z\"\n        },\n        \"can_submit\": false,\n        \"status\": \"en_attente\",\n        \"motif_rejet\": null,\n        \"valider_a\": null\n    }\n}"
				}
			]
		},
		{
			"name": "2. Client - Soumettre demande (Simple)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Demande cr√©√©e avec succ√®s\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"    pm.expect(jsonData.message).to.include('succ√®s');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{client_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"type_demandeur\": \"client\",\n    \"reponses\": [\n        {\n            \"question_id\": 1,\n            \"reponse\": \"Non\"\n        },\n        {\n            \"question_id\": 2,\n            \"reponse\": 175\n        },\n        {\n            \"question_id\": 3,\n            \"reponse\": 75.5\n        },\n        {\n            \"question_id\": 4,\n            \"reponse\": true\n        },\n        {\n            \"question_id\": 5,\n            \"reponse\": \"2025-01-15\"\n        }\n    ]\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions/client",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions",
						"client"
					]
				},
				"description": "## üéØ Objectif\n\nSoumettre une demande d'adh√©sion simple sans b√©n√©ficiaires.\n\n## üîê Authentification\n\n**R√¥le requis** : `client`\n\n## üìù Corps de la requ√™te\n\n### Type de demandeur\n- `type_demandeur`: `\"client\"` (obligatoire)\n\n### R√©ponses au questionnaire\nTableau d'objets contenant :\n- `question_id` : ID de la question (integer)\n- `reponse` : R√©ponse adapt√©e au type de question\n\n### Types de r√©ponses\n- **text** : string\n- **number** : numeric\n- **boolean** : true/false\n- **date** : \"YYYY-MM-DD\"\n- **radio** : string (option s√©lectionn√©e)\n- **file** : fichier (utiliser form-data)\n\n## ‚ö†Ô∏è R√®gles importantes\n\n1. Un client ne peut avoir qu'une seule demande active\n2. Les questions d√©pendent du `type_demandeur`\n3. Les r√©ponses obligatoires doivent √™tre fournies\n4. Email de confirmation envoy√© automatiquement"
			},
			"response": [
				{
					"name": "Succ√®s - Demande cr√©√©e",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type_demandeur\": \"client\",\n    \"reponses\": [\n        {\n            \"question_id\": 1,\n            \"reponse\": \"Non\"\n        },\n        {\n            \"question_id\": 2,\n            \"reponse\": 175\n        }\n    ]\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/client",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"client"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Demande d'adh√©sion soumise avec succ√®s.\",\n    \"data\": null\n}"
				},
				{
					"name": "Erreur - Demande en cours",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"type_demandeur\": \"client\",\n    \"reponses\": []\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/client",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"client"
							]
						}
					},
					"status": "Bad Request",
					"code": 400,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": false,\n    \"message\": \"Vous avez d√©j√† une demande d'adh√©sion en cours de traitement. Veuillez attendre la r√©ponse.\",\n    \"data\": null\n}"
				}
			]
		},
		{
			"name": "3. Client - Soumettre demande (Avec b√©n√©ficiaires)",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"pm.test(\"Demande avec b√©n√©ficiaires cr√©√©e\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.success).to.be.true;",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{client_token}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "type_demandeur",
							"value": "client",
							"type": "text"
						},
						{
							"key": "reponses[0][question_id]",
							"value": "1",
							"type": "text"
						},
						{
							"key": "reponses[0][reponse]",
							"value": "Non",
							"type": "text"
						},
						{
							"key": "reponses[1][question_id]",
							"value": "2",
							"type": "text"
						},
						{
							"key": "reponses[1][reponse]",
							"value": "175",
							"type": "text"
						},
						{
							"key": "reponses[2][question_id]",
							"value": "5",
							"type": "text",
							"description": "Question de type FILE"
						},
						{
							"key": "reponses[2][reponse]",
							"type": "file",
							"src": "/path/to/document.pdf"
						},
						{
							"key": "beneficiaires[0][nom]",
							"value": "Doe",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][prenoms]",
							"value": "Jane",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][date_naissance]",
							"value": "1995-05-15",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][sexe]",
							"value": "F",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][email]",
							"value": "jane.doe@example.com",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][contact]",
							"value": "+237690000000",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][profession]",
							"value": "Enseignante",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][lien_parente]",
							"value": "conjoint",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][photo_url]",
							"type": "file",
							"src": "/path/to/photo.jpg"
						},
						{
							"key": "beneficiaires[0][reponses][0][question_id]",
							"value": "1",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][reponses][0][reponse]",
							"value": "Non",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][reponses][1][question_id]",
							"value": "2",
							"type": "text"
						},
						{
							"key": "beneficiaires[0][reponses][1][reponse]",
							"value": "165",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions/client",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions",
						"client"
					]
				},
				"description": "## üéØ Objectif\n\nSoumettre une demande d'adh√©sion compl√®te avec b√©n√©ficiaires et fichiers.\n\n## üì§ Format de la requ√™te\n\n**Content-Type** : `multipart/form-data`\n\n‚ö†Ô∏è **Important** : Utiliser `form-data` car des fichiers sont inclus\n\n## üë®‚Äçüë©‚Äçüëß‚Äçüë¶ B√©n√©ficiaires\n\nChaque b√©n√©ficiaire doit contenir :\n\n### Champs obligatoires\n- `nom` : Nom du b√©n√©ficiaire\n- `date_naissance` : Date (YYYY-MM-DD)\n- `sexe` : \"M\" ou \"F\"\n- `lien_parente` : conjoint | enfant | parent | autre\n- `photo_url` : Fichier image (JPG, PNG, max 5Mo)\n- `reponses` : Tableau de r√©ponses au questionnaire\n\n### Champs optionnels\n- `prenoms` : Pr√©noms\n- `email` : Email valide\n- `contact` : T√©l√©phone\n- `profession` : Profession\n\n## üìÅ Fichiers\n\n### Limites\n- **Photos b√©n√©ficiaires** : 5 Mo max\n- **Documents (r√©ponses)** : 2 Mo max\n\n### Formats accept√©s\n- **Images** : JPEG, PNG, JPG\n- **Documents** : PDF, JPEG, PNG, JPG"
			},
			"response": []
		},
		{
			"name": "4. Personnel - Lister toutes les demandes",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response is an array\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data).to.be.an('array');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{technicien_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions"
					]
				},
				"description": "## üéØ Objectif\n\nR√©cup√©rer la liste de toutes les demandes d'adh√©sion.\n\n## üîê Authentification\n\n**R√¥les requis** : \n- `technicien` (voir uniquement type \"client\")\n- `medecin_controleur` (voir uniquement type \"prestataire\")\n- `admin_global` (voir tout)\n- `gestionnaire`\n- `commercial`\n\n## üîç Filtrage automatique\n\nLe syst√®me filtre automatiquement selon le r√¥le :\n- **Technicien** ‚Üí Demandes de type `client` uniquement\n- **M√©decin contr√¥leur** ‚Üí Demandes de type `prestataire` uniquement\n- **Admin/Gestionnaire/Commercial** ‚Üí Toutes les demandes\n\n## üìä Donn√©es retourn√©es\n\nPour chaque demande :\n- Informations de base (ID, type, statut)\n- Utilisateur associ√©\n- Propositions de contrat\n- R√©ponses au questionnaire\n- B√©n√©ficiaires (si applicable)"
			},
			"response": [
				{
					"name": "Liste des demandes",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Liste des demandes d'adh√©sion r√©cup√©r√©e avec succ√®s\",\n    \"data\": [\n        {\n            \"id\": 1,\n            \"type_demandeur\": \"client\",\n            \"statut\": \"en_attente\",\n            \"created_at\": \"2025-10-12T10:00:00.000000Z\",\n            \"updated_at\": \"2025-10-12T10:00:00.000000Z\",\n            \"user\": {\n                \"id\": 5,\n                \"email\": \"client@example.com\",\n                \"contact\": \"+237690000000\"\n            },\n            \"propositions_contrat\": []\n        },\n        {\n            \"id\": 2,\n            \"type_demandeur\": \"client\",\n            \"statut\": \"proposee\",\n            \"created_at\": \"2025-10-11T14:30:00.000000Z\",\n            \"updated_at\": \"2025-10-12T09:15:00.000000Z\",\n            \"user\": {\n                \"id\": 7,\n                \"email\": \"autre.client@example.com\",\n                \"contact\": \"+237691111111\"\n            },\n            \"propositions_contrat\": [\n                {\n                    \"id\": 1,\n                    \"contrat_id\": 3,\n                    \"statut\": \"proposee\"\n                }\n            ]\n        }\n    ]\n}"
				}
			]
		},
		{
			"name": "5. Personnel - D√©tails d'une demande",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Response has demandeur\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data).to.have.property('demandeur');",
							"});",
							"",
							"pm.test(\"Response has questionnaire\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data).to.have.property('reponses_questionnaire');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{technicien_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions/:demande_id",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions",
						":demande_id"
					],
					"variable": [
						{
							"key": "demande_id",
							"value": "1",
							"description": "ID de la demande d'adh√©sion"
						}
					]
				},
				"description": "## üéØ Objectif\n\nR√©cup√©rer tous les d√©tails d'une demande d'adh√©sion sp√©cifique.\n\n## üîê Authentification\n\n**R√¥les requis** : \n- `technicien` (demandes type \"client\" uniquement)\n- `medecin_controleur` (demandes type \"prestataire\" uniquement)\n\n## üìä Donn√©es incluses\n\n### Pour une personne physique (client)\n- **Demandeur** : Informations personnelles compl√®tes\n- **Questionnaire** : Toutes les r√©ponses\n- **B√©n√©ficiaires** : Liste avec leurs r√©ponses\n- **Statistiques** :\n  - Nombre de b√©n√©ficiaires\n  - R√©partition par sexe\n  - R√©partition par √¢ge\n- **Contrat propos√©** : Si applicable\n- **Validation** : Infos sur qui a valid√©/rejet√©\n\n## üö´ Restrictions\n\n- Technicien ne peut voir que les demandes \"client\"\n- M√©decin contr√¥leur ne peut voir que les demandes \"prestataire\"\n- 403 si tentative d'acc√®s non autoris√©"
			},
			"response": [
				{
					"name": "D√©tails demande client",
					"originalRequest": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"1"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"D√©tails de la demande d'adh√©sion\",\n    \"data\": {\n        \"id\": 1,\n        \"type_demandeur\": \"client\",\n        \"statut\": \"en_attente\",\n        \"created_at\": \"2025-10-12T10:00:00.000000Z\",\n        \"updated_at\": \"2025-10-12T10:00:00.000000Z\",\n        \"motif_rejet\": null,\n        \"valide_par\": null,\n        \"valider_a\": null,\n        \"demandeur\": {\n            \"nom\": \"Dupont\",\n            \"prenoms\": \"Jean\",\n            \"date_naissance\": \"1990-01-15\",\n            \"sexe\": \"M\",\n            \"profession\": \"Ing√©nieur\",\n            \"contact\": \"+237690000000\",\n            \"email\": \"jean.dupont@example.com\",\n            \"photo\": \"https://example.com/storage/users/photo.jpg\",\n            \"adresse\": \"Yaound√©, Cameroun\"\n        },\n        \"contrat_propose\": null,\n        \"reponses_questionnaire\": [\n            {\n                \"question_id\": 1,\n                \"question\": \"Avez-vous des ant√©c√©dents m√©dicaux ?\",\n                \"type_donnee\": \"boolean\",\n                \"reponse\": true\n            },\n            {\n                \"question_id\": 2,\n                \"question\": \"Quelle est votre taille (en cm) ?\",\n                \"type_donnee\": \"number\",\n                \"reponse\": 175\n            }\n        ],\n        \"statistiques\": {\n            \"nombre_beneficiaires\": 2,\n            \"repartition_par_sexe\": {\n                \"M\": 1,\n                \"F\": 1\n            },\n            \"repartition_par_age\": {\n                \"0-18\": 1,\n                \"19-35\": 0,\n                \"36-60\": 1,\n                \"60+\": 0\n            }\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "6. Client - Accepter proposition contrat",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Contrat accept√©\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data).to.have.property('contrat_id');",
							"    pm.expect(jsonData.message).to.include('succ√®s');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{client_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/client/contrats-proposes/:proposition_id/accepter",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"client",
						"contrats-proposes",
						":proposition_id",
						"accepter"
					],
					"variable": [
						{
							"key": "proposition_id",
							"value": "1",
							"description": "ID de la proposition de contrat"
						}
					]
				},
				"description": "## üéØ Objectif\n\nPermet √† un client d'accepter une proposition de contrat qui lui a √©t√© faite.\n\n## üîê Authentification\n\n**R√¥les requis** : `client`, `entreprise`\n\n## ‚öôÔ∏è Processus automatique\n\n1. Cr√©ation d'un `ClientContrat` (contrat actif)\n2. Mise √† jour de la proposition ‚Üí statut `acceptee`\n3. Mise √† jour de la demande ‚Üí statut `acceptee`\n4. G√©n√©ration du num√©ro de police\n5. Mise √† jour du solde client\n6. Notifications envoy√©es :\n   - Au client (confirmation)\n   - Au technicien (info)\n\n## üìÖ Dates\n\n- **Date d√©but** : Date actuelle\n- **Date fin** : +1 an\n- **Statut** : `actif`\n\n## ‚ö†Ô∏è Conditions\n\n- La proposition doit √™tre au statut `proposee`\n- Le client doit √™tre propri√©taire de la demande\n- Une seule acceptation possible"
			},
			"response": [
				{
					"name": "Succ√®s - Contrat accept√©",
					"originalRequest": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/client/contrats-proposes/1/accepter",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"client",
								"contrats-proposes",
								"1",
								"accepter"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Contrat accept√© avec succ√®s\",\n    \"data\": {\n        \"contrat_id\": 15,\n        \"message\": \"Contrat accept√© avec succ√®s\"\n    }\n}"
				}
			]
		},
		{
			"name": "7. Personnel - Rejeter une demande",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"pm.test(\"Status code is 200\", function () {",
							"    pm.response.to.have.status(200);",
							"});",
							"",
							"pm.test(\"Demande rejet√©e\", function () {",
							"    var jsonData = pm.response.json();",
							"    pm.expect(jsonData.data.statut).to.equal('rejetee');",
							"});"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{technicien_token}}",
						"type": "text"
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"motif_rejet\": \"Documents m√©dicaux incomplets. Veuillez fournir les r√©sultats d'analyses suivants : glyc√©mie, tension art√©rielle, et certificat m√©dical r√©cent.\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/v1/demandes-adhesions/:demande_id/rejeter",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"demandes-adhesions",
						":demande_id",
						"rejeter"
					],
					"variable": [
						{
							"key": "demande_id",
							"value": "1",
							"description": "ID de la demande √† rejeter"
						}
					]
				},
				"description": "## üéØ Objectif\n\nPermet au personnel de rejeter une demande d'adh√©sion avec un motif.\n\n## üîê Authentification\n\n**R√¥les requis** : `technicien`, `medecin_controleur`\n\n## üìù Corps de la requ√™te\n\n### Param√®tre requis\n- `motif_rejet` : string (minimum 10 caract√®res)\n\n### Exemple de motifs\n- Documents incomplets\n- Informations non conformes\n- Crit√®res d'√©ligibilit√© non remplis\n- Dossier m√©dical pr√©sentant des risques\n\n## ‚öôÔ∏è Processus automatique\n\n1. V√©rification du statut (doit √™tre `en_attente`)\n2. Mise √† jour du statut ‚Üí `rejetee`\n3. Enregistrement du motif\n4. Enregistrement de qui a rejet√©\n5. Notification au client :\n   - Notification in-app\n   - Email avec le motif\n6. Client peut resoumettre une nouvelle demande\n\n## ‚ö†Ô∏è Conditions\n\n- Seules les demandes `en_attente` peuvent √™tre rejet√©es\n- Le motif doit √™tre clair et d√©taill√©\n- Action irr√©versible"
			},
			"response": [
				{
					"name": "Succ√®s - Demande rejet√©e",
					"originalRequest": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"motif_rejet\": \"Documents m√©dicaux incomplets.\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/demandes-adhesions/1/rejeter",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"demandes-adhesions",
								"1",
								"rejeter"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Demande d'adh√©sion rejet√©e avec succ√®s\",\n    \"data\": {\n        \"demande_id\": 1,\n        \"statut\": \"rejetee\",\n        \"rejetee_par\": \"Dr. Martin Dupont\"\n    }\n}"
				}
			]
		},
		{
			"name": "8. T√©l√©charger document demande",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/download/demande-adhesion/:demande_id",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"download",
						"demande-adhesion",
						":demande_id"
					],
					"variable": [
						{
							"key": "demande_id",
							"value": "1",
							"description": "ID de la demande"
						}
					]
				},
				"description": "## üéØ Objectif\n\nT√©l√©charger un PDF r√©capitulatif de la demande d'adh√©sion.\n\n## üîê Authentification\n\n**Authentification requise** : Oui\n\n## üìÑ Contenu du PDF\n\n- Informations du demandeur\n- R√©ponses au questionnaire\n- Liste des b√©n√©ficiaires (si applicable)\n- Statut de la demande\n- Propositions de contrat\n- Historique de validation\n\n## üì• Format\n\n- **Type** : application/pdf\n- **Nom** : demande_adhesion_{id}.pdf"
			},
			"response": []
		},
		{
			"name": "9. Client - Mes contrats propos√©s",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Api-Key",
						"value": "{{api_key}}",
						"type": "text"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{client_token}}",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/client/contrats-proposes",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"client",
						"contrats-proposes"
					]
				},
				"description": "## üéØ Objectif\n\nR√©cup√©rer la liste des propositions de contrat pour le client connect√©.\n\n## üîê Authentification\n\n**R√¥les requis** : `client`, `entreprise`\n\n## üìä Donn√©es retourn√©es\n\nPour chaque proposition :\n- ID de la proposition\n- D√©tails du contrat propos√©\n- Garanties incluses\n- Prime totale\n- Statut de la proposition\n- Date de proposition\n- Technicien ayant fait la proposition"
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Script global avant chaque requ√™te",
					"console.log('üöÄ Ex√©cution de la requ√™te:', pm.info.requestName);"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Tests globaux pour toutes les requ√™tes",
					"pm.test(\"Response time is less than 5000ms\", function () {",
					"    pm.expect(pm.response.responseTime).to.be.below(5000);",
					"});",
					"",
					"pm.test(\"Response has success property\", function () {",
					"    var jsonData = pm.response.json();",
					"    pm.expect(jsonData).to.have.property('success');",
					"});",
					"",
					"pm.test(\"Response has message property\", function () {",
					"    var jsonData = pm.response.json();",
					"    pm.expect(jsonData).to.have.property('message');",
					"});"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8000",
			"type": "string"
		},
		{
			"key": "api_key",
			"value": "your_api_key_here",
			"type": "string"
		},
		{
			"key": "client_token",
			"value": "your_client_jwt_token_here",
			"type": "string"
		},
		{
			"key": "technicien_token",
			"value": "your_technicien_jwt_token_here",
			"type": "string"
		},
		{
			"key": "token",
			"value": "your_jwt_token_here",
			"type": "string"
		}
	]
}

